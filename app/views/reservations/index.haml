%h1
  = t('.reservations')
  %hr/
%table.table
  %thead
    %tr
      %th= t('.name')
      %th= t('.location')
      %th= t('.phone')
      %th= t('.email')
      %th= t('.date')
      %th= t('.approved')
      %th= t('.comment')
      - if can? [:edit, :destroy], @reservations
        %th{colspan: 3}
  %tbody
    - @reservations.each do |reservation|
      %tr{class: reservation.approved? ? '' : 'danger'}
        %td= link_to reservation.name, reservation
        %td= reservation.locations.map(&:name).join(', ')
        %td= reservation.phone
        %td= reservation.email
        %td= reservation.date
        %td= reservation.approved ? i('ok') : i('remove')
        %td= truncate(reservation.comment, length: 100)
        - if can? :update, reservation
          %td= link_to i('check'), reservation_path(reservation, reservation: {approved: true}), method: :patch, data: { confirm: t('.confirm_approve', name: reservation.name) }
        - if can? :edit, reservation
          %td= link_to i('edit'), edit_reservation_path(reservation)
        - if can? :destroy, reservation
          %td= link_to i('trash'), reservation, method: :delete, data: { confirm: t('.confirm') }
